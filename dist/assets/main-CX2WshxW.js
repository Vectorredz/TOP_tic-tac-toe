(function(){const f=document.createElement("link").relList;if(f&&f.supports&&f.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))g(a);new MutationObserver(a=>{for(const c of a)if(c.type==="childList")for(const h of c.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&g(h)}).observe(document,{childList:!0,subtree:!0});function l(a){const c={};return a.integrity&&(c.integrity=a.integrity),a.referrerPolicy&&(c.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?c.credentials="include":a.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function g(a){if(a.ep)return;a.ep=!0;const c=l(a);fetch(a.href,c)}})();const p=3,v=3;let L=[[0,0],[0,1],[0,2],[1,0],[1,1],[1,2],[2,0],[2,1],[2,2]],m=[],M=!0,T=!1;const d={isWin:!1,isTie:!1},r={landing:document.querySelector("#landing-page"),game:document.querySelector("#game-page"),gameGrid:document.querySelector("#game-grid"),p1Turn:document.querySelector("#p1-turn"),p2Turn:document.querySelector("#p2-turn"),victory:document.querySelector("#victory-call"),retry:document.querySelector("#retry")};document.body.id===r.game.id&&O();Array.prototype.exists=function([u,f]){return this.some(([l,g])=>l==u&&g==f)};Array.prototype.index=function([u,f]){for(let l=0;l<this.length;l++)if(this[l][0]==u&&this[l][1]==f)return l};function O(){let u=function(){let s=[];for(let n=0;n<p;n++){let t=[];for(let e=0;e<v;e++){t.push(0);let o=document.createElement("div");document.createElement("div"),o.classList.add("cell"),o.classList.add("flex"),o.classList.add("text-[5em]"),o.classList.add("font-bold"),o.classList.add("items-center"),o.classList.add("justify-center"),o.innerHTML="",r.gameGrid.append(o)}s.push(t)}return s}();function f(i){return{name:i,move:function(o,y){let w=h(u,i,o,y);console.log(w)},isMoved:!1}}const l={p1:f("louise"),p2:f("bot")};m=Array.from(document.querySelectorAll(".cell")),setTimeout(g,500);function g(){for(let i=0;i<m.length;i++)m[i].addEventListener("click",()=>{if(d.isWin===!1&&M===!0&&d.isTie===!1){let[s,n]=[Math.floor(i/p),i%p];l.p1.move(s,n),l.p1.isMoved&&(W(l.p1.name,m[i]),M=!1,T=!0,!d.isWin&&!d.isTie&&a(),setTimeout(c,2e3))}})}function a(){T?(r.p1Turn.classList.add("hidden"),r.p2Turn.classList.remove("hidden")):M&&(r.p1Turn.classList.remove("hidden"),r.p2Turn.classList.add("hidden"))}function c(){if(!(d.isWin===!0||T===!1||d.isTie===!0)&&(d.isWin===!1&&T===!0||d.isTie===!1)){let i=Math.floor(Math.random()*L.length),[s,n]=L[i],t=s*p+n;l.p2.move(s,n),W(l.p2.name,m[t]),M=!0,T=!1,!d.isWin&&!d.isTie&&a()}}function h(i,s,n,t){let e=s===l.p1.name?"x":"o",o=s===l.p1.name?"p1":"p2";if(L.exists([n,t])===!0){let y=L.index([n,t]);L.splice(y,1),i[n][t]=e,l[o].isMoved=!0,L.length<=0&&(d.isTie=!0)}else l[o].isMoved=!1;return b(),i}function b(){let i=[],s=[],n=[];for(let t=0;t<p;t++)x(u[t],"horizontal",t);for(let t=0;t<p;t++)if(t==0)for(let e=0;e<v;e++){n=[];for(const[o,y]of[[0,e],[1,e],[2,e]])0<=o<p&&0<=y<v&&n.push(u[o][y]);x(n,"vertical",e)}if(d.isWin===!1){for(const[t,e]of[[0,0],[1,1],[2,2],[0,2],[1,1],[2,0]])i.length<3?i.push(u[t][e]):s.push(u[t][e]);x(i,"diagonal"),x(s,"diagonal_reversed")}}function W(i,s){i===l.p1.name?(s.innerHTML="x",d.isWin&&s.classList.add("text-[var(--secondary-blue)]")):(s.innerHTML="o",d.isWin&&s.classList.add("text-[var(--primary-red)]"))}function x(i,s,n){let t="";i.every(e=>e==="x")?(console.log("Player1 wins"),t="text-[var(--secondary-blue)]",d.isWin=!0,r.game.classList.remove("in-game"),r.game.classList.add("p1-win"),r.p1Turn.classList.add("hidden"),r.p2Turn.classList.add("hidden"),r.victory.innerHTML="Player 1 wins!",r.victory.classList.remove("hidden"),r.retry.classList.remove("hidden"),S(t,s,n)):i.every(e=>e==="o")?(console.log("Player2 wins"),t="text-[var(--primary-red)]",d.isWin=!0,r.game.classList.remove("in-game"),r.game.classList.add("p2-win"),r.p1Turn.classList.add("hidden"),r.p2Turn.classList.add("hidden"),r.victory.innerHTML="Bot wins!",r.victory.classList.remove("hidden"),r.retry.classList.remove("hidden"),S(t,s,n)):d.isTie===!0&&(r.game.classList.remove("in-game"),r.p1Turn.classList.add("hidden"),r.p2Turn.classList.add("hidden"),r.victory.classList.remove("hidden"),r.victory.innerHTML="TIE!",r.retry.classList.remove("hidden"),r.game.classList.add("tie"))}function S(i,s,n){let t=0;if(d.isWin){for(let e=0;e<m.length;e++)n===Math.floor(e/p)&&s==="horizontal"?m[e].classList.add(`${i}`):n==e%v&&s==="vertical"&&m[e].classList.add(`${i}`);for(let e=0;e<p;e++)for(let o=0;o<v;o++)[[0,0],[1,1],[2,2]].exists([e,o])&&s==="diagonal"?m[t].classList.add(`${i}`):[[0,2],[1,1],[2,0]].exists([e,o])&&s==="diagonal_reversed"&&m[t].classList.add(`${i}`),t++}}}
